---
layout:     post
title:      Linux I/O
toc:        true
categories: [System Programming, C/C++]
---
# POSIX I/O
**POSIX I/O**是POSIX标准的组成部分，而非C标准的组成部分。**作为Linux最底层的I/O处理函数，POSIX I/O仅仅将文件看作是一个个字节，无任何其他格式而言。**不难推断，包括C Standard I/O在内的其他I/O库在Linux上的实现均是对POSIX I/O的封装。

## 1. 文件描述符
对于Linux内核而言，所有打开的文件都通过**File Descriptor(文件名描述符)**引用。File Descriptor是一个非负整数，当打开一个现有文件或创建一个新文件时，Linux内核就会返回一个File Descriptor；当读写一个文件时，就需要将其File Descriptor作为参数传递给read或write。

## 2. 打开、创建和关闭一个文件
打开和创建文件：
```c
#include <fcntl.h>  // short file control

int open(const char* path, int flags);
int open(const char* path, int flags, mode_t mode);

int creat(const char* path, mode_t mode);
// equals to open(path, O_WRONLY | O_CREAT | O_TRUNC, mode)

int openat(int fd, const char* path, int flags);
int openat(int fd, const char* path, int flags, mode_t mode);
```
关闭文件：
```c
#include <unistd.h>

int close(int fd);
```

## 3. 文件偏移